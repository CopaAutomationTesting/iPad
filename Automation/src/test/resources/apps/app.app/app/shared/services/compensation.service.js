"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
//angular & nativescript references
var core_1 = require("@angular/core");
var http_1 = require("@angular/http");
require("rxjs/add/operator/map");
require("rxjs/add/operator/catch");
var app_constants_1 = require("../../app.constants");
var app_executiontime_1 = require("../../app.executiontime");
var checkinorder_service_1 = require("./checkinorder.service");
var handleError_extractData_service_1 = require("./handleError_extractData.service");
var http_2 = require("nativescript-angular/http");
var CompensationService = /** @class */ (function () {
    function CompensationService(_http, _https, _configuration, _shared) {
        this._http = _http;
        this._https = _https;
        this._configuration = _configuration;
        this._shared = _shared;
        // var config = _configuration;
        this.actionUrl = _configuration.CompensationType;
        this.actionTypeUrl = _configuration.CompensationType;
        this.actionOrderUrl = _configuration.CompensationOrders;
        this.actionCLT = _configuration.CompensationCLT;
        this.headerApiuser = _configuration.HeaderApiuser;
        this.headerCurrency = this._shared.GetCurrency();
        this.salesOffice = this._shared.GetUserPointofSale();
        this.headers = new http_1.Headers();
        this.headers.append('Content-Type', 'application/json');
        this.headers.append('Accept', 'application/json');
        this.headers.append('Connection', 'keep-alive');
    }
    //Compensation Search Screen - Service
    CompensationService.prototype.getPassengerType = function () {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        console.log("All Pax:" + JSON.stringify(this.actionUrl + "reference/getcompensationpassengertype"));
        return this._http.get(this.actionUrl + "reference/getcompensationpassengertype", { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.getCompensationPaxList = function (date, flight, location, paxtype) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        var flightnum = flight.substr(2);
        console.log(this.actionUrl + "compensation/" + date + "/" + flight + "/" + location + "/" + paxtype);
        return this._http.get(this.actionUrl + "compensation/" + date + "/CM/" + flightnum + "/" + location + "/" + paxtype, { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.getSaleOfficeReport = function () {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        return this._http.get(this.actionUrl + "account/salesreports/status", { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.GetAllPassenger = function (date, flight) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        console.log("All Pax:" + JSON.stringify(this.actionUrl + date + "/" + flight));
        return this._http.get(this.actionUrl + date + "/" + flight + "/pty/passengermarking/allpax", { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.getPassengerTypeList = function (date, flight, location, serviceType) {
        //oversold
        //misconnection
        //gradechange
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        var flightnum = flight.substr(2);
        console.log("All Pax:" + JSON.stringify(this.actionUrl + "compensation/" + date + "/" + flight + "/" + location + "/passengermarking/" + serviceType));
        return this._http.get(this.actionUrl + "compensation/" + date + "/CM/" + flightnum + "/" + location + "/passengermarking/" + serviceType, { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.getPassengerByOrder = function (orderId) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        return this._http.get(this.actionUrl + "compensation/CM/" + orderId + "/pnrpassengermarking?res=true", { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.status = function (date, flightnumber, location) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        return this._http.get(this.actionUrl + "flights/" + date + "/" + flightnumber + "?origin=" + location, { headers: headers }).map(handleError_extractData_service_1.HandleErrorExtractData.extractData).catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.getFQTV = function (search) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        console.log(this.actionUrl + "orders/search?fqtv=" + search);
        return this._http.get(this.actionUrl + "orders/search?fqtv=" + search, { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.getETKT = function (search) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        return this._http.get(this.actionUrl + "compensation/CM/eticketpassengermarking?query=" + search, { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    //End
    //Passenger Screen - Services
    CompensationService.prototype.getCompensationReasons = function (Request) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        return this._http.post(this.actionUrl + "compensation/Reason", JSON.parse(JSON.stringify(Request)), { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.saveCompensationReasons = function (response) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        return this._http.post(this.actionUrl + "compensation/save/save", JSON.parse(JSON.stringify(response)), { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.getEmailByOrderId = function (OrderID) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        return this._http.get(this.actionUrl + "orders/" + OrderID + "?res=true", { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.deleteCompensationReasons = function (response) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        return this._http.post(this.actionUrl + "compensation/delete", JSON.parse(JSON.stringify(response)), { headers: headers })
            .map(function (res) { return res.json(); })
            .catch(app_executiontime_1.AppExecutiontime.handleErrors);
    };
    CompensationService.prototype.GetHeaderInformation = function (date, flights) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        return this._http.get(this.actionUrl + date + "/" + flights + "/pty", { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    // End
    // Issue Compensation
    CompensationService.prototype.postBreRequest = function (model) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        console.log(JSON.stringify(this.actionCLT));
        return this._http.post(this.actionUrl + "compensation/breandsave", JSON.parse(JSON.stringify(model)), { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.PostIssueCompensations = function (Request) {
        var urlconfig = NSURLSessionConfiguration.defaultSessionConfiguration;
        urlconfig.timeoutIntervalForRequest = 300.0;
        urlconfig.timeoutIntervalForResource = 300.0;
        // let urlconfig2 = NSMutableURLRequest.;
        // urlconfig2.timeoutIntervalForRequest  = 300.0;
        var headers = new http_1.Headers();
        headers.append('Accept', 'application/json, text/plain, */*');
        headers.append('Connection', 'keep-alive');
        headers.append("ApiUser", this.headerApiuser);
        headers.append("http_currency", this.headerCurrency);
        headers.append("http_salesoffice", this.salesOffice);
        console.log(JSON.stringify(this.actionCLT));
        return this._http.post(this.actionUrl + "compensation/issuesave", JSON.parse(JSON.stringify(Request)), { headers: headers })
            .timeout(500000)
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.PostEmailCompensation = function (Request) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        console.log(JSON.stringify(this.actionUrl + "compensation/email/emd"));
        return this._http.post(this.actionUrl + "compensation/emailandsave/emd", JSON.parse(JSON.stringify(Request)), { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.printEMDCompensationService = function (Request) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        console.log(JSON.stringify(this.actionUrl + "compensation/printandsave/emd"));
        return this._http.post(this.actionUrl + "compensation/printandsave/emd", JSON.parse(JSON.stringify(Request)), { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.printEMDBluetoothCompensationService = function (Request) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        console.log(JSON.stringify(this.actionUrl + "compensation/bluetoothprint/emd"));
        return this._http.post(this.actionUrl + "compensation/bluetoothprint/emd", JSON.parse(JSON.stringify(Request)), { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.updateEmailId = function (OrderId, Request) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        console.log(JSON.stringify(this.actionCLT));
        return this._http.post(this.actionUrl + "orders/" + OrderId + "/traveler/update?res=true", JSON.parse(JSON.stringify(Request)), { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    CompensationService.prototype.saveBluetoothPrint = function (response) {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        return this._http.post(this.actionUrl + "compensation/bluetoothprintsave", JSON.parse(JSON.stringify(response)), { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    //End
    // Print and Email
    // End
    CompensationService.prototype.extractData = function (res) {
        console.log("Extract data called");
        // console.log("Response:" + res.text());
        var body = res.json();
        return body.data || {};
    };
    CompensationService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.Http, http_2.NativeScriptHttpModule, app_constants_1.Configuration, checkinorder_service_1.CheckinOrderService])
    ], CompensationService);
    return CompensationService;
}());
exports.CompensationService = CompensationService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcGVuc2F0aW9uLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjb21wZW5zYXRpb24uc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLG1DQUFtQztBQUNuQyxzQ0FBMkM7QUFDM0Msc0NBQXdEO0FBRXhELGlDQUErQjtBQUMvQixtQ0FBaUM7QUFJakMscURBQW9EO0FBQ3BELDZEQUEyRDtBQUMzRCwrREFBNkQ7QUFDN0QscUZBQTJFO0FBQzNFLGtEQUFtRTtBQUVuRTtJQVVJLDZCQUFvQixLQUFXLEVBQVUsTUFBOEIsRUFBVSxjQUE2QixFQUFVLE9BQTRCO1FBQWhJLFVBQUssR0FBTCxLQUFLLENBQU07UUFBVSxXQUFNLEdBQU4sTUFBTSxDQUF3QjtRQUFVLG1CQUFjLEdBQWQsY0FBYyxDQUFlO1FBQVUsWUFBTyxHQUFQLE9BQU8sQ0FBcUI7UUFFaEosK0JBQStCO1FBQy9CLElBQUksQ0FBQyxTQUFTLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDO1FBQ2pELElBQUksQ0FBQyxhQUFhLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDO1FBQ3JELElBQUksQ0FBQyxjQUFjLEdBQUcsY0FBYyxDQUFDLGtCQUFrQixDQUFDO1FBQ3hELElBQUksQ0FBQyxTQUFTLEdBQUcsY0FBYyxDQUFDLGVBQWUsQ0FBQztRQUNoRCxJQUFJLENBQUMsYUFBYSxHQUFHLGNBQWMsQ0FBQyxhQUFhLENBQUM7UUFDbEQsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ2pELElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBQ3JELElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxjQUFPLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxjQUFjLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztRQUN4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QUM7SUExT1EsbUJBQW1CO1FBRC9CLGlCQUFVLEVBQUU7eUNBV2tCLFdBQUksRUFBa0IsNkJBQXNCLEVBQTBCLDZCQUFhLEVBQW1CLDBDQUFtQjtPQVYzSSxtQkFBbUIsQ0E2Ty9CO0lBQUQsMEJBQUM7Q0FBQSxBQTdPRCxJQTZPQztBQTdPWSxrREFBbUIiLCJzb3VyY2VzQ29udGVudCI6WyIvL2FuZ3VsYXIgJiBuYXRpdmVzY3JpcHQgcmVmZXJlbmNlc1xuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cCwgUmVzcG9uc2UsIEhlYWRlcnMgfSBmcm9tICdAYW5ndWxhci9odHRwJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzL1J4JztcbmltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3IvbWFwJztcbmltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3IvY2F0Y2gnO1xuXG4vL2FwcCByZWZlcmVuY2VzXG5pbXBvcnQgeyBQYXNzZW5nZXIgfSBmcm9tICcuLi9pbnRlcmZhY2UvaW5kZXgnO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9IGZyb20gJy4uLy4uL2FwcC5jb25zdGFudHMnO1xuaW1wb3J0IHsgQXBwRXhlY3V0aW9udGltZSB9IGZyb20gXCIuLi8uLi9hcHAuZXhlY3V0aW9udGltZVwiO1xuaW1wb3J0IHsgQ2hlY2tpbk9yZGVyU2VydmljZSB9IGZyb20gXCIuL2NoZWNraW5vcmRlci5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBIYW5kbGVFcnJvckV4dHJhY3REYXRhIH0gZnJvbSBcIi4vaGFuZGxlRXJyb3JfZXh0cmFjdERhdGEuc2VydmljZVwiO1xuaW1wb3J0IHsgTmF0aXZlU2NyaXB0SHR0cE1vZHVsZSB9IGZyb20gJ25hdGl2ZXNjcmlwdC1hbmd1bGFyL2h0dHAnO1xuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIENvbXBlbnNhdGlvblNlcnZpY2Uge1xuXG4gICAgcHJpdmF0ZSBhY3Rpb25Vcmw6IHN0cmluZztcbiAgICBwcml2YXRlIGFjdGlvblR5cGVVcmw6IHN0cmluZztcbiAgICBwcml2YXRlIGFjdGlvbk9yZGVyVXJsOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBhY3Rpb25DTFQ6IHN0cmluZztcbiAgICBwcml2YXRlIGhlYWRlcnM6IEhlYWRlcnM7XG4gICAgcHJpdmF0ZSBoZWFkZXJBcGl1c2VyOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBzYWxlc09mZmljZTogc3RyaW5nO1xuICAgIHByaXZhdGUgaGVhZGVyQ3VycmVuY3k6IHN0cmluZztcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9odHRwOiBIdHRwLCBwcml2YXRlIF9odHRwczogTmF0aXZlU2NyaXB0SHR0cE1vZHVsZSwgcHJpdmF0ZSBfY29uZmlndXJhdGlvbjogQ29uZmlndXJhdGlvbiwgcHJpdmF0ZSBfc2hhcmVkOiBDaGVja2luT3JkZXJTZXJ2aWNlKSB7XG5cbiAgICAgICAgLy8gdmFyIGNvbmZpZyA9IF9jb25maWd1cmF0aW9uO1xuICAgICAgICB0aGlzLmFjdGlvblVybCA9IF9jb25maWd1cmF0aW9uLkNvbXBlbnNhdGlvblR5cGU7XG4gICAgICAgIHRoaXMuYWN0aW9uVHlwZVVybCA9IF9jb25maWd1cmF0aW9uLkNvbXBlbnNhdGlvblR5cGU7XG4gICAgICAgIHRoaXMuYWN0aW9uT3JkZXJVcmwgPSBfY29uZmlndXJhdGlvbi5Db21wZW5zYXRpb25PcmRlcnM7XG4gICAgICAgIHRoaXMuYWN0aW9uQ0xUID0gX2NvbmZpZ3VyYXRpb24uQ29tcGVuc2F0aW9uQ0xUO1xuICAgICAgICB0aGlzLmhlYWRlckFwaXVzZXIgPSBfY29uZmlndXJhdGlvbi5IZWFkZXJBcGl1c2VyO1xuICAgICAgICB0aGlzLmhlYWRlckN1cnJlbmN5ID0gdGhpcy5fc2hhcmVkLkdldEN1cnJlbmN5KCk7XG4gICAgICAgIHRoaXMuc2FsZXNPZmZpY2UgPSB0aGlzLl9zaGFyZWQuR2V0VXNlclBvaW50b2ZTYWxlKCk7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgICAgIHRoaXMuaGVhZGVycy5hcHBlbmQoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgIHRoaXMuaGVhZGVycy5hcHBlbmQoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgIHRoaXMuaGVhZGVycy5hcHBlbmQoJ0Nvbm5lY3Rpb24nLCAna2VlcC1hbGl2ZScpO1xuICAgIH1cblxuICAgIC8vQ29tcGVuc2F0aW9uIFNlYXJjaCBTY3JlZW4gLSBTZXJ2aWNlXG4gICAgcHVibGljIGdldFBhc3NlbmdlclR5cGUoKSB7XG4gICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoXCJBcGlVc2VyXCIsIHRoaXMuaGVhZGVyQXBpdXNlcik7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQWxsIFBheDpcIiArIEpTT04uc3RyaW5naWZ5KHRoaXMuYWN0aW9uVXJsICsgXCJyZWZlcmVuY2UvZ2V0Y29tcGVuc2F0aW9ucGFzc2VuZ2VydHlwZVwiKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9odHRwLmdldCh0aGlzLmFjdGlvblVybCArIFwicmVmZXJlbmNlL2dldGNvbXBlbnNhdGlvbnBhc3NlbmdlcnR5cGVcIiwgeyBoZWFkZXJzOiBoZWFkZXJzIH0pXG4gICAgICAgICAgICAubWFwKEhhbmRsZUVycm9yRXh0cmFjdERhdGEuZXh0cmFjdERhdGEpXG4gICAgICAgICAgICAuY2F0Y2goSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5oYW5kbGVFcnJvcnMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDb21wZW5zYXRpb25QYXhMaXN0KGRhdGUsIGZsaWdodCwgbG9jYXRpb24sIHBheHR5cGUpIHtcbiAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgICAgICBoZWFkZXJzLmFwcGVuZChcIkFwaVVzZXJcIiwgdGhpcy5oZWFkZXJBcGl1c2VyKTtcbiAgICAgICAgdmFyIGZsaWdodG51bSA9IGZsaWdodC5zdWJzdHIoMik7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuYWN0aW9uVXJsICsgXCJjb21wZW5zYXRpb24vXCIgKyBkYXRlICsgXCIvXCIgKyBmbGlnaHQgKyBcIi9cIiArIGxvY2F0aW9uICsgXCIvXCIgKyBwYXh0eXBlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2h0dHAuZ2V0KHRoaXMuYWN0aW9uVXJsICsgXCJjb21wZW5zYXRpb24vXCIgKyBkYXRlICsgXCIvQ00vXCIgKyBmbGlnaHRudW0gKyBcIi9cIiArIGxvY2F0aW9uICsgXCIvXCIgKyBwYXh0eXBlLCB7IGhlYWRlcnM6IGhlYWRlcnMgfSlcbiAgICAgICAgICAgIC5tYXAoSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5leHRyYWN0RGF0YSlcbiAgICAgICAgICAgIC5jYXRjaChIYW5kbGVFcnJvckV4dHJhY3REYXRhLmhhbmRsZUVycm9ycyk7XG4gICAgfVxuICAgIHB1YmxpYyBnZXRTYWxlT2ZmaWNlUmVwb3J0KCkge1xuICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKFwiQXBpVXNlclwiLCB0aGlzLmhlYWRlckFwaXVzZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5nZXQodGhpcy5hY3Rpb25VcmwgKyBcImFjY291bnQvc2FsZXNyZXBvcnRzL3N0YXR1c1wiLCB7IGhlYWRlcnM6IGhlYWRlcnMgfSlcbiAgICAgICAgICAgIC5tYXAoSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5leHRyYWN0RGF0YSlcbiAgICAgICAgICAgIC5jYXRjaChIYW5kbGVFcnJvckV4dHJhY3REYXRhLmhhbmRsZUVycm9ycyk7XG4gICAgfVxuICAgIHB1YmxpYyBHZXRBbGxQYXNzZW5nZXIoZGF0ZTogRGF0ZSwgZmxpZ2h0OiBzdHJpbmcpIHtcblxuICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKFwiQXBpVXNlclwiLCB0aGlzLmhlYWRlckFwaXVzZXIpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkFsbCBQYXg6XCIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLmFjdGlvblVybCArIGRhdGUgKyBcIi9cIiArIGZsaWdodCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5nZXQodGhpcy5hY3Rpb25VcmwgKyBkYXRlICsgXCIvXCIgKyBmbGlnaHQgKyBcIi9wdHkvcGFzc2VuZ2VybWFya2luZy9hbGxwYXhcIiwgeyBoZWFkZXJzOiBoZWFkZXJzIH0pXG4gICAgICAgICAgICAubWFwKEhhbmRsZUVycm9yRXh0cmFjdERhdGEuZXh0cmFjdERhdGEpXG4gICAgICAgICAgICAuY2F0Y2goSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5oYW5kbGVFcnJvcnMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRQYXNzZW5nZXJUeXBlTGlzdChkYXRlOiBEYXRlLCBmbGlnaHQ6IHN0cmluZywgbG9jYXRpb246IHN0cmluZywgc2VydmljZVR5cGU6IHN0cmluZywgKSB7XG4gICAgICAgIC8vb3ZlcnNvbGRcbiAgICAgICAgLy9taXNjb25uZWN0aW9uXG4gICAgICAgIC8vZ3JhZGVjaGFuZ2VcbiAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgICAgICBoZWFkZXJzLmFwcGVuZChcIkFwaVVzZXJcIiwgdGhpcy5oZWFkZXJBcGl1c2VyKTtcbiAgICAgICAgdmFyIGZsaWdodG51bSA9IGZsaWdodC5zdWJzdHIoMik7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQWxsIFBheDpcIiArIEpTT04uc3RyaW5naWZ5KHRoaXMuYWN0aW9uVXJsICsgXCJjb21wZW5zYXRpb24vXCIgKyBkYXRlICsgXCIvXCIgKyBmbGlnaHQgKyBcIi9cIiArIGxvY2F0aW9uICsgXCIvcGFzc2VuZ2VybWFya2luZy9cIiArIHNlcnZpY2VUeXBlKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9odHRwLmdldCh0aGlzLmFjdGlvblVybCArIFwiY29tcGVuc2F0aW9uL1wiICsgZGF0ZSArIFwiL0NNL1wiICsgZmxpZ2h0bnVtICsgXCIvXCIgKyBsb2NhdGlvbiArIFwiL3Bhc3Nlbmdlcm1hcmtpbmcvXCIgKyBzZXJ2aWNlVHlwZSwgeyBoZWFkZXJzOiBoZWFkZXJzIH0pXG4gICAgICAgICAgICAubWFwKEhhbmRsZUVycm9yRXh0cmFjdERhdGEuZXh0cmFjdERhdGEpXG4gICAgICAgICAgICAuY2F0Y2goSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5oYW5kbGVFcnJvcnMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRQYXNzZW5nZXJCeU9yZGVyKG9yZGVySWQ6IHN0cmluZykge1xuICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKFwiQXBpVXNlclwiLCB0aGlzLmhlYWRlckFwaXVzZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5nZXQodGhpcy5hY3Rpb25VcmwgKyBcImNvbXBlbnNhdGlvbi9DTS9cIiArIG9yZGVySWQgKyBcIi9wbnJwYXNzZW5nZXJtYXJraW5nP3Jlcz10cnVlXCIsIHsgaGVhZGVyczogaGVhZGVycyB9KVxuICAgICAgICAgICAgLm1hcChIYW5kbGVFcnJvckV4dHJhY3REYXRhLmV4dHJhY3REYXRhKVxuICAgICAgICAgICAgLmNhdGNoKEhhbmRsZUVycm9yRXh0cmFjdERhdGEuaGFuZGxlRXJyb3JzKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXR1cyhkYXRlOiBzdHJpbmcsIGZsaWdodG51bWJlcjogc3RyaW5nLCBsb2NhdGlvbiA6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoXCJBcGlVc2VyXCIsIHRoaXMuaGVhZGVyQXBpdXNlcik7XG4gICAgICAgIHJldHVybiB0aGlzLl9odHRwLmdldCh0aGlzLmFjdGlvblVybCArIFwiZmxpZ2h0cy9cIiArIGRhdGUgKyBcIi9cIiArIGZsaWdodG51bWJlciArIFwiP29yaWdpbj1cIiArIGxvY2F0aW9uLCB7IGhlYWRlcnM6IGhlYWRlcnMgfSkubWFwKEhhbmRsZUVycm9yRXh0cmFjdERhdGEuZXh0cmFjdERhdGEpLmNhdGNoKEhhbmRsZUVycm9yRXh0cmFjdERhdGEuaGFuZGxlRXJyb3JzKTtcblxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGUVRWKHNlYXJjaDogc3RyaW5nKSB7XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgICAgICBoZWFkZXJzLmFwcGVuZChcIkFwaVVzZXJcIiwgdGhpcy5oZWFkZXJBcGl1c2VyKTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5hY3Rpb25VcmwgKyBcIm9yZGVycy9zZWFyY2g/ZnF0dj1cIiArIHNlYXJjaCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9odHRwLmdldCh0aGlzLmFjdGlvblVybCArIFwib3JkZXJzL3NlYXJjaD9mcXR2PVwiICsgc2VhcmNoLCB7IGhlYWRlcnM6IGhlYWRlcnMgfSlcbiAgICAgICAgICAgIC5tYXAoSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5leHRyYWN0RGF0YSlcbiAgICAgICAgICAgIC5jYXRjaChIYW5kbGVFcnJvckV4dHJhY3REYXRhLmhhbmRsZUVycm9ycyk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEVUS1Qoc2VhcmNoOiBzdHJpbmcpIHtcblxuICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKFwiQXBpVXNlclwiLCB0aGlzLmhlYWRlckFwaXVzZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5nZXQodGhpcy5hY3Rpb25VcmwgKyBcImNvbXBlbnNhdGlvbi9DTS9ldGlja2V0cGFzc2VuZ2VybWFya2luZz9xdWVyeT1cIiArIHNlYXJjaCwgeyBoZWFkZXJzOiBoZWFkZXJzIH0pXG4gICAgICAgICAgICAubWFwKEhhbmRsZUVycm9yRXh0cmFjdERhdGEuZXh0cmFjdERhdGEpXG4gICAgICAgICAgICAuY2F0Y2goSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5oYW5kbGVFcnJvcnMpO1xuICAgIH1cbiAgICAvL0VuZFxuICAgIC8vUGFzc2VuZ2VyIFNjcmVlbiAtIFNlcnZpY2VzXG5cbiAgICBwdWJsaWMgZ2V0Q29tcGVuc2F0aW9uUmVhc29ucyhSZXF1ZXN0OiBhbnkpIHtcblxuICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKFwiQXBpVXNlclwiLCB0aGlzLmhlYWRlckFwaXVzZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5wb3N0KHRoaXMuYWN0aW9uVXJsICsgXCJjb21wZW5zYXRpb24vUmVhc29uXCIsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoUmVxdWVzdCkpLCB7IGhlYWRlcnM6IGhlYWRlcnMgfSlcbiAgICAgICAgICAgIC5tYXAoSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5leHRyYWN0RGF0YSlcbiAgICAgICAgICAgIC5jYXRjaChIYW5kbGVFcnJvckV4dHJhY3REYXRhLmhhbmRsZUVycm9ycyk7XG4gICAgfVxuICAgIHB1YmxpYyBzYXZlQ29tcGVuc2F0aW9uUmVhc29ucyhyZXNwb25zZTogYW55KSB7XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgICAgICBoZWFkZXJzLmFwcGVuZChcIkFwaVVzZXJcIiwgdGhpcy5oZWFkZXJBcGl1c2VyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2h0dHAucG9zdCh0aGlzLmFjdGlvblVybCArIFwiY29tcGVuc2F0aW9uL3NhdmUvc2F2ZVwiLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSksIHsgaGVhZGVyczogaGVhZGVycyB9KVxuICAgICAgICAgICAgLm1hcChIYW5kbGVFcnJvckV4dHJhY3REYXRhLmV4dHJhY3REYXRhKVxuICAgICAgICAgICAgLmNhdGNoKEhhbmRsZUVycm9yRXh0cmFjdERhdGEuaGFuZGxlRXJyb3JzKTtcbiAgICB9XG4gICAgcHVibGljIGdldEVtYWlsQnlPcmRlcklkKE9yZGVySUQ6IGFueSkge1xuICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKFwiQXBpVXNlclwiLCB0aGlzLmhlYWRlckFwaXVzZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5nZXQodGhpcy5hY3Rpb25VcmwgKyBcIm9yZGVycy9cIiArIE9yZGVySUQgKyBcIj9yZXM9dHJ1ZVwiLCB7IGhlYWRlcnM6IGhlYWRlcnMgfSlcbiAgICAgICAgICAgIC5tYXAoSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5leHRyYWN0RGF0YSlcbiAgICAgICAgICAgIC5jYXRjaChIYW5kbGVFcnJvckV4dHJhY3REYXRhLmhhbmRsZUVycm9ycyk7XG4gICAgfVxuXG4gICAgcHVibGljIGRlbGV0ZUNvbXBlbnNhdGlvblJlYXNvbnMocmVzcG9uc2U6IGFueSkge1xuICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKFwiQXBpVXNlclwiLCB0aGlzLmhlYWRlckFwaXVzZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5wb3N0KHRoaXMuYWN0aW9uVXJsICsgXCJjb21wZW5zYXRpb24vZGVsZXRlXCIsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKSwgeyBoZWFkZXJzOiBoZWFkZXJzIH0pXG4gICAgICAgICAgICAubWFwKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgLmNhdGNoKEFwcEV4ZWN1dGlvbnRpbWUuaGFuZGxlRXJyb3JzKTtcbiAgICB9XG4gICAgcHVibGljIEdldEhlYWRlckluZm9ybWF0aW9uKGRhdGU6IHN0cmluZywgZmxpZ2h0czogc3RyaW5nKSB7XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgICAgICBoZWFkZXJzLmFwcGVuZChcIkFwaVVzZXJcIiwgdGhpcy5oZWFkZXJBcGl1c2VyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2h0dHAuZ2V0KHRoaXMuYWN0aW9uVXJsICsgZGF0ZSArIFwiL1wiICsgZmxpZ2h0cyArIFwiL3B0eVwiLCB7IGhlYWRlcnM6IGhlYWRlcnMgfSlcbiAgICAgICAgICAgIC5tYXAoSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5leHRyYWN0RGF0YSlcbiAgICAgICAgICAgIC5jYXRjaChIYW5kbGVFcnJvckV4dHJhY3REYXRhLmhhbmRsZUVycm9ycyk7XG4gICAgfVxuXG4gICAgLy8gRW5kXG5cbiAgICAvLyBJc3N1ZSBDb21wZW5zYXRpb25cblxuICAgIHB1YmxpYyBwb3N0QnJlUmVxdWVzdChtb2RlbDogYW55KSB7XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgICAgICBoZWFkZXJzLmFwcGVuZChcIkFwaVVzZXJcIiwgdGhpcy5oZWFkZXJBcGl1c2VyKTtcbiAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodGhpcy5hY3Rpb25DTFQpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2h0dHAucG9zdCh0aGlzLmFjdGlvblVybCArIFwiY29tcGVuc2F0aW9uL2JyZWFuZHNhdmVcIiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShtb2RlbCkpLCB7IGhlYWRlcnM6IGhlYWRlcnMgfSlcbiAgICAgICAgICAgIC5tYXAoSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5leHRyYWN0RGF0YSlcbiAgICAgICAgICAgIC5jYXRjaChIYW5kbGVFcnJvckV4dHJhY3REYXRhLmhhbmRsZUVycm9ycyk7XG4gICAgfVxuICAgIHB1YmxpYyBQb3N0SXNzdWVDb21wZW5zYXRpb25zKFJlcXVlc3Q6IGFueSkge1xuICAgICAgICBsZXQgdXJsY29uZmlnID0gTlNVUkxTZXNzaW9uQ29uZmlndXJhdGlvbi5kZWZhdWx0U2Vzc2lvbkNvbmZpZ3VyYXRpb247XG4gICAgICAgIHVybGNvbmZpZy50aW1lb3V0SW50ZXJ2YWxGb3JSZXF1ZXN0ID0gMzAwLjA7XG4gICAgICAgIHVybGNvbmZpZy50aW1lb3V0SW50ZXJ2YWxGb3JSZXNvdXJjZSA9IDMwMC4wO1xuICAgICAgICAvLyBsZXQgdXJsY29uZmlnMiA9IE5TTXV0YWJsZVVSTFJlcXVlc3QuO1xuICAgICAgICAvLyB1cmxjb25maWcyLnRpbWVvdXRJbnRlcnZhbEZvclJlcXVlc3QgID0gMzAwLjA7XG4gICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonKTtcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoJ0Nvbm5lY3Rpb24nLCAna2VlcC1hbGl2ZScpO1xuICAgICAgICBoZWFkZXJzLmFwcGVuZChcIkFwaVVzZXJcIiwgdGhpcy5oZWFkZXJBcGl1c2VyKTtcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoXCJodHRwX2N1cnJlbmN5XCIsIHRoaXMuaGVhZGVyQ3VycmVuY3kpO1xuICAgICAgICBoZWFkZXJzLmFwcGVuZChcImh0dHBfc2FsZXNvZmZpY2VcIiwgdGhpcy5zYWxlc09mZmljZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHRoaXMuYWN0aW9uQ0xUKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9odHRwLnBvc3QodGhpcy5hY3Rpb25VcmwgKyBcImNvbXBlbnNhdGlvbi9pc3N1ZXNhdmVcIiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShSZXF1ZXN0KSksIHsgaGVhZGVyczogaGVhZGVycyB9KVxuICAgICAgICAgICAgLnRpbWVvdXQoNTAwMDAwKVxuICAgICAgICAgICAgLm1hcChIYW5kbGVFcnJvckV4dHJhY3REYXRhLmV4dHJhY3REYXRhKVxuICAgICAgICAgICAgLmNhdGNoKEhhbmRsZUVycm9yRXh0cmFjdERhdGEuaGFuZGxlRXJyb3JzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgUG9zdEVtYWlsQ29tcGVuc2F0aW9uKFJlcXVlc3Q6IGFueSkge1xuICAgICAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKFwiQXBpVXNlclwiLCB0aGlzLmhlYWRlckFwaXVzZXIpO1xuICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh0aGlzLmFjdGlvblVybCArIFwiY29tcGVuc2F0aW9uL2VtYWlsL2VtZFwiKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9odHRwLnBvc3QodGhpcy5hY3Rpb25VcmwgKyBcImNvbXBlbnNhdGlvbi9lbWFpbGFuZHNhdmUvZW1kXCIsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoUmVxdWVzdCkpLCB7IGhlYWRlcnM6IGhlYWRlcnMgfSlcbiAgICAgICAgICAgIC5tYXAoSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5leHRyYWN0RGF0YSlcbiAgICAgICAgICAgIC5jYXRjaChIYW5kbGVFcnJvckV4dHJhY3REYXRhLmhhbmRsZUVycm9ycyk7XG4gICAgfVxuICAgIHB1YmxpYyBwcmludEVNRENvbXBlbnNhdGlvblNlcnZpY2UoUmVxdWVzdDogYW55KSB7XG4gICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoXCJBcGlVc2VyXCIsIHRoaXMuaGVhZGVyQXBpdXNlcik7XG4gICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHRoaXMuYWN0aW9uVXJsICsgXCJjb21wZW5zYXRpb24vcHJpbnRhbmRzYXZlL2VtZFwiKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9odHRwLnBvc3QodGhpcy5hY3Rpb25VcmwgKyBcImNvbXBlbnNhdGlvbi9wcmludGFuZHNhdmUvZW1kXCIsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoUmVxdWVzdCkpLCB7IGhlYWRlcnM6IGhlYWRlcnMgfSlcbiAgICAgICAgICAgIC5tYXAoSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5leHRyYWN0RGF0YSlcbiAgICAgICAgICAgIC5jYXRjaChIYW5kbGVFcnJvckV4dHJhY3REYXRhLmhhbmRsZUVycm9ycyk7XG4gICAgfVxuICAgIHB1YmxpYyBwcmludEVNREJsdWV0b290aENvbXBlbnNhdGlvblNlcnZpY2UoUmVxdWVzdDogYW55KSB7XG4gICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoXCJBcGlVc2VyXCIsIHRoaXMuaGVhZGVyQXBpdXNlcik7XG4gICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHRoaXMuYWN0aW9uVXJsICsgXCJjb21wZW5zYXRpb24vYmx1ZXRvb3RocHJpbnQvZW1kXCIpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2h0dHAucG9zdCh0aGlzLmFjdGlvblVybCArIFwiY29tcGVuc2F0aW9uL2JsdWV0b290aHByaW50L2VtZFwiLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KFJlcXVlc3QpKSwgeyBoZWFkZXJzOiBoZWFkZXJzIH0pXG4gICAgICAgICAgICAubWFwKEhhbmRsZUVycm9yRXh0cmFjdERhdGEuZXh0cmFjdERhdGEpXG4gICAgICAgICAgICAuY2F0Y2goSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5oYW5kbGVFcnJvcnMpO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVFbWFpbElkKE9yZGVySWQ6IGFueSwgUmVxdWVzdDogYW55KSB7XG4gICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoXCJBcGlVc2VyXCIsIHRoaXMuaGVhZGVyQXBpdXNlcik7XG4gICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHRoaXMuYWN0aW9uQ0xUKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9odHRwLnBvc3QodGhpcy5hY3Rpb25VcmwgKyBcIm9yZGVycy9cIiArIE9yZGVySWQgKyBcIi90cmF2ZWxlci91cGRhdGU/cmVzPXRydWVcIiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShSZXF1ZXN0KSksIHsgaGVhZGVyczogaGVhZGVycyB9KVxuICAgICAgICAgICAgLm1hcChIYW5kbGVFcnJvckV4dHJhY3REYXRhLmV4dHJhY3REYXRhKVxuICAgICAgICAgICAgLmNhdGNoKEhhbmRsZUVycm9yRXh0cmFjdERhdGEuaGFuZGxlRXJyb3JzKTtcbiAgICB9XG4gICAgcHVibGljIHNhdmVCbHVldG9vdGhQcmludChyZXNwb25zZTogYW55KSB7XG4gICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoXCJBcGlVc2VyXCIsIHRoaXMuaGVhZGVyQXBpdXNlcik7XG4gICAgICAgIHJldHVybiB0aGlzLl9odHRwLnBvc3QodGhpcy5hY3Rpb25VcmwgKyBcImNvbXBlbnNhdGlvbi9ibHVldG9vdGhwcmludHNhdmVcIiwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpLCB7IGhlYWRlcnM6IGhlYWRlcnMgfSlcbiAgICAgICAgICAgIC5tYXAoSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5leHRyYWN0RGF0YSlcbiAgICAgICAgICAgIC5jYXRjaChIYW5kbGVFcnJvckV4dHJhY3REYXRhLmhhbmRsZUVycm9ycyk7XG4gICAgfVxuXG4gICAgLy9FbmRcblxuICAgIC8vIFByaW50IGFuZCBFbWFpbFxuXG4gICAgLy8gRW5kXG5cbiAgICBwcml2YXRlIGV4dHJhY3REYXRhKHJlczogUmVzcG9uc2UpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFeHRyYWN0IGRhdGEgY2FsbGVkXCIpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlJlc3BvbnNlOlwiICsgcmVzLnRleHQoKSk7XG4gICAgICAgIGxldCBib2R5ID0gcmVzLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIGJvZHkuZGF0YSB8fCB7fTtcbiAgICB9XG5cblxufSJdfQ==