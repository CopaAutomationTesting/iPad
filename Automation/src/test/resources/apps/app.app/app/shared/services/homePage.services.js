"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var http_1 = require("@angular/http");
require("rxjs/add/operator/map");
require("rxjs/add/operator/catch");
require("rxjs/add/operator/catch");
var router_1 = require("nativescript-angular/router");
var handleError_extractData_service_1 = require("./handleError_extractData.service");
var app_constants_1 = require("../../app.constants");
var checkinorder_service_1 = require("./checkinorder.service");
var HomePageService = /** @class */ (function () {
    function HomePageService(routerExtensions, _http, _configuration, _shared) {
        this.routerExtensions = routerExtensions;
        this._http = _http;
        this._configuration = _configuration;
        this._shared = _shared;
        this.actionUrlforProfile = _configuration.ServerWithApiUrlProfile;
        this.headerApiuser = _configuration.HeaderApiuser;
        this.actionUrlforPrinting = _configuration.HostPrinter;
        this.headerCurrency = this._shared.GetCurrency();
        this.salesOffice = this._shared.GetUserPointofSale();
    }
    HomePageService.prototype.getCityService = function () {
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        return this._http.get(this.actionUrlforPrinting + "locations", { headers: headers })
            .map(handleError_extractData_service_1.HandleErrorExtractData.extractData)
            .catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    HomePageService.prototype.GetAccountProfile = function (salesOffice, currency) {
        if (salesOffice === void 0) { salesOffice = ""; }
        if (currency === void 0) { currency = ""; }
        var headers = new http_1.Headers();
        headers.append("ApiUser", this.headerApiuser);
        headers.append("http_currency", currency);
        headers.append("http_salesoffice", salesOffice);
        console.log(JSON.stringify(this.actionUrlforProfile));
        return this._http.get(this.actionUrlforProfile, { headers: headers }).map(handleError_extractData_service_1.HandleErrorExtractData.extractData).catch(handleError_extractData_service_1.HandleErrorExtractData.handleErrors);
    };
    HomePageService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [router_1.RouterExtensions, http_1.Http, app_constants_1.Configuration, checkinorder_service_1.CheckinOrderService])
    ], HomePageService);
    return HomePageService;
}());
exports.HomePageService = HomePageService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaG9tZVBhZ2Uuc2VydmljZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJob21lUGFnZS5zZXJ2aWNlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHNDQUEyQztBQUMzQyxzQ0FBd0U7QUFFeEUsaUNBQStCO0FBQy9CLG1DQUFpQztBQUNqQyxtQ0FBaUM7QUFFakMsc0RBQStEO0FBRy9ELHFGQUEyRTtBQUMzRSxxREFBb0Q7QUFDcEQsK0RBQTZEO0FBSTdEO0lBUUkseUJBQW9CLGdCQUFrQyxFQUFVLEtBQVcsRUFBVSxjQUE2QixFQUFVLE9BQTRCO1FBQXBJLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7UUFBVSxVQUFLLEdBQUwsS0FBSyxDQUFNO1FBQVUsbUJBQWMsR0FBZCxjQUFjLENBQWU7UUFBVSxZQUFPLEdBQVAsT0FBTyxDQUFxQjtRQUNwSixJQUFJLENBQUMsbUJBQW1CLEdBQUcsY0FBYyxDQUFDLHVCQUF1QixDQUFDO1FBQ2xFLElBQUksQ0FBQyxhQUFhLEdBQUcsY0FBYyxDQUFDLGFBQWEsQ0FBQztRQUNsRCxJQUFJLENBQUMsb0JBQW9CLEdBQUcsY0FBYyxDQUFDLFdBQVcsQ0FBQztRQUN2RCxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDakQsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGtCQUFrQixFQUFFLENBQUM7SUFFekQsQ0FBQztJQUNNLHdDQUFjLEdBQXJCO1FBQ0ksSUFBSSxPQUFPLEdBQUcsSUFBSSxjQUFPLEVBQUUsQ0FBQztRQUM1QixPQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDOUMsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsV0FBVyxFQUFFLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxDQUFDO2FBQy9FLEdBQUcsQ0FBQyx3REFBc0IsQ0FBQyxXQUFXLENBQUM7YUFDdkMsS0FBSyxDQUFDLHdEQUFzQixDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ3BELENBQUM7SUFDTSwyQ0FBaUIsR0FBeEIsVUFBeUIsV0FBdUIsRUFBRSxRQUFvQjtRQUE3Qyw0QkFBQSxFQUFBLGdCQUF1QjtRQUFFLHlCQUFBLEVBQUEsYUFBb0I7UUFFbEUsSUFBSSxPQUFPLEdBQUcsSUFBSSxjQUFPLEVBQUUsQ0FBQztRQUM1QixPQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDOUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxlQUFlLEVBQUMsUUFBUSxDQUFDLENBQUM7UUFDekMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsRUFBQyxXQUFXLENBQUMsQ0FBQztRQUMvQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQztRQUN0RCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyx3REFBc0IsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFLLENBQUMsd0RBQXNCLENBQUMsWUFBWSxDQUFDLENBQUM7SUFFN0osQ0FBQztJQWhDUSxlQUFlO1FBRjNCLGlCQUFVLEVBQUU7eUNBVTZCLHlCQUFnQixFQUFpQixXQUFJLEVBQTBCLDZCQUFhLEVBQW1CLDBDQUFtQjtPQVIvSSxlQUFlLENBa0MzQjtJQUFELHNCQUFDO0NBQUEsQUFsQ0QsSUFrQ0M7QUFsQ1ksMENBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwLCBSZXNwb25zZSwgSGVhZGVycywgUmVxdWVzdE9wdGlvbnMgfSBmcm9tICdAYW5ndWxhci9odHRwJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzL1J4JztcbmltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3IvbWFwJztcbmltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3IvY2F0Y2gnO1xuaW1wb3J0ICdyeGpzL2FkZC9vcGVyYXRvci9jYXRjaCc7XG5pbXBvcnQgKiBhcyBkaWFsb2dzIGZyb20gXCJ1aS9kaWFsb2dzXCI7XG5pbXBvcnQgeyBSb3V0ZXJFeHRlbnNpb25zIH0gZnJvbSBcIm5hdGl2ZXNjcmlwdC1hbmd1bGFyL3JvdXRlclwiO1xuaW1wb3J0IHsgUm91dGVyLCBOYXZpZ2F0aW9uRXh0cmFzLCBBY3RpdmF0ZWRSb3V0ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgKiBhcyBBcHBsaWNhdGlvblNldHRpbmdzIGZyb20gXCJhcHBsaWNhdGlvbi1zZXR0aW5nc1wiO1xuaW1wb3J0IHsgSGFuZGxlRXJyb3JFeHRyYWN0RGF0YSB9IGZyb20gXCIuL2hhbmRsZUVycm9yX2V4dHJhY3REYXRhLnNlcnZpY2VcIjtcbmltcG9ydCB7IENvbmZpZ3VyYXRpb24gfSBmcm9tICcuLi8uLi9hcHAuY29uc3RhbnRzJztcbmltcG9ydCB7IENoZWNraW5PcmRlclNlcnZpY2UgfSBmcm9tIFwiLi9jaGVja2lub3JkZXIuc2VydmljZVwiO1xuXG5ASW5qZWN0YWJsZSgpXG5cbmV4cG9ydCBjbGFzcyBIb21lUGFnZVNlcnZpY2Uge1xuXG4gICAgcHJpdmF0ZSBhY3Rpb25Vcmxmb3JQcmludGluZzogc3RyaW5nO1xuICAgIHByaXZhdGUgYWN0aW9uVXJsZm9yUHJvZmlsZTogc3RyaW5nO1xuICAgIHByaXZhdGUgaGVhZGVyQXBpdXNlcjogc3RyaW5nO1xuICAgIHByaXZhdGUgaGVhZGVyQ3VycmVuY3k6IHN0cmluZztcbiAgICBwcml2YXRlIHNhbGVzT2ZmaWNlOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJvdXRlckV4dGVuc2lvbnM6IFJvdXRlckV4dGVuc2lvbnMsIHByaXZhdGUgX2h0dHA6IEh0dHAsIHByaXZhdGUgX2NvbmZpZ3VyYXRpb246IENvbmZpZ3VyYXRpb24sIHByaXZhdGUgX3NoYXJlZDogQ2hlY2tpbk9yZGVyU2VydmljZSkge1xuICAgICAgICB0aGlzLmFjdGlvblVybGZvclByb2ZpbGUgPSBfY29uZmlndXJhdGlvbi5TZXJ2ZXJXaXRoQXBpVXJsUHJvZmlsZTtcbiAgICAgICAgdGhpcy5oZWFkZXJBcGl1c2VyID0gX2NvbmZpZ3VyYXRpb24uSGVhZGVyQXBpdXNlcjtcbiAgICAgICAgdGhpcy5hY3Rpb25Vcmxmb3JQcmludGluZyA9IF9jb25maWd1cmF0aW9uLkhvc3RQcmludGVyO1xuICAgICAgICB0aGlzLmhlYWRlckN1cnJlbmN5ID0gdGhpcy5fc2hhcmVkLkdldEN1cnJlbmN5KCk7XG4gICAgICAgIHRoaXMuc2FsZXNPZmZpY2UgPSB0aGlzLl9zaGFyZWQuR2V0VXNlclBvaW50b2ZTYWxlKCk7XG5cbiAgICB9XG4gICAgcHVibGljIGdldENpdHlTZXJ2aWNlKCk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoXCJBcGlVc2VyXCIsIHRoaXMuaGVhZGVyQXBpdXNlcik7XG4gICAgICAgIHJldHVybiB0aGlzLl9odHRwLmdldCh0aGlzLmFjdGlvblVybGZvclByaW50aW5nICsgXCJsb2NhdGlvbnNcIiwgeyBoZWFkZXJzOiBoZWFkZXJzIH0pXG4gICAgICAgICAgICAubWFwKEhhbmRsZUVycm9yRXh0cmFjdERhdGEuZXh0cmFjdERhdGEpXG4gICAgICAgICAgICAuY2F0Y2goSGFuZGxlRXJyb3JFeHRyYWN0RGF0YS5oYW5kbGVFcnJvcnMpO1xuICAgIH1cbiAgICBwdWJsaWMgR2V0QWNjb3VudFByb2ZpbGUoc2FsZXNPZmZpY2U6c3RyaW5nID0gXCJcIiwgY3VycmVuY3k6c3RyaW5nID0gXCJcIik6IE9ic2VydmFibGU8YW55PiB7XG5cbiAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgICAgICBoZWFkZXJzLmFwcGVuZChcIkFwaVVzZXJcIiwgdGhpcy5oZWFkZXJBcGl1c2VyKTtcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoXCJodHRwX2N1cnJlbmN5XCIsY3VycmVuY3kpOyAgXG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKFwiaHR0cF9zYWxlc29mZmljZVwiLHNhbGVzT2ZmaWNlKTsgXG4gICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHRoaXMuYWN0aW9uVXJsZm9yUHJvZmlsZSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5nZXQodGhpcy5hY3Rpb25Vcmxmb3JQcm9maWxlLCB7IGhlYWRlcnM6IGhlYWRlcnMgfSkubWFwKEhhbmRsZUVycm9yRXh0cmFjdERhdGEuZXh0cmFjdERhdGEpLmNhdGNoKEhhbmRsZUVycm9yRXh0cmFjdERhdGEuaGFuZGxlRXJyb3JzKTtcblxuICAgIH1cblxufSJdfQ==